{"version":3,"sources":["../src/server/config.ts","../src/server/routes.ts","../src/index.ts"],"names":["port","hostname","origin","logLevel","staticPath","staticDir","path","config","c","routes","currentLang","t","main","server","createServer"],"mappings":";0DAiBI,IAAMA,EAAgB,OAAA,CAAQ,GAAA,CAAI,MAA6B,GAAA,CACzDC,CAAAA,CAAgB,QAAQ,GAAA,CAAI,QAAA,EAA6B,YACzDC,CAAAA,CAAAA,CAAiB,OAAA,CAAQ,GAAA,CAAI,YAAA,EAA4B,CAAA,OAAA,EAAUD,CAAQ,IAAID,CAAI,CAAA,CAAA,EAAI,MAAM,GAAG,CAAA,CAChGG,EAAiB,OAAA,CAAQ,GAAA,CAAI,WAA4B,MAAA,CACzDC,CAAAA,CAAgB,QAAQ,GAAA,CAAI,WAAA,EAA6B,IACzDC,CAAAA,CAAgBC,CAAAA,CAAK,QAAQ,OAAA,CAAQ,GAAA,CAAI,UAAA,EAAgB,cAAc,CAAA,CAGhEC,CAAAA,CAAwB,CACjC,IAAA,CAAkBP,CAAAA,CAClB,SAAkBC,CAAAA,CAClB,cAAA,CAAkB,IAClB,cAAA,CAAkB,QAAA,CAClB,OAAkB,EAAC,CAEnB,OAAkB,CACd,IAAA,CAAcG,EACd,SAAA,CAAcC,CAClB,EAEA,QAAA,CAAkB,CACd,SAAA,CAAc,CACV,GAAA,CAAkB,GAAA,CAClB,SAAkB,GAAA,CAClB,OAAA,CAAkB,6CAClB,YAAA,CAAmBG,CAAAA,EACAA,EAAE,OAAA,EAAS,OAAA,EAAS,MAAM,WAAW,CAAA,EACnCA,EAAE,EAAA,EAAM,SAEjC,EACA,IAAA,CAAc,CACV,OAAkBN,CAAAA,CAClB,WAAA,CAAkB,IAAA,CAClB,OAAA,CAAkB,CAAC,KAAA,CAAO,OAAQ,KAAA,CAAO,QAAA,CAAU,OAAO,CAAA,CAC1D,cAAA,CAAkB,CAAC,cAAA,CAAgB,eAAA,CAAiB,cAAc,CACtE,CAAA,CACA,KAAM,IACV,CAAA,CAEA,QAAkB,CACd,KAAA,CAAcC,EACd,MAAA,CAAc,IAClB,CAAA,CAEA,IAAA,CAAiB,CACb,eAAA,CAAsB,KACtB,kBAAA,CAAsB,CAAC,KAAM,IAAI,CAAA,CACjC,SAAsB,YAC1B,CAAA,CAOA,WAAY,SAAY,CAAE,CAC9B,CAAA,CCzDO,IAAMM,CAAAA,CAA6B,CActC,CACI,MAAA,CAAU,KAAA,CACV,IAAA,CAAU,eAEV,OAAA,CAAUD,CAAAA,EAAkB,CAOxB,IAAME,GAAAA,CAAcF,EAAE,IAAA,CAEtB,OAAOA,EAAE,IAAA,CAAK,CACV,QAAaG,CAAAA,CAAE,OAAO,EACtB,QAAA,CAAaD,GAAAA,CACb,UAAaF,CAAAA,CAAE,IAAA,EAAM,qBAAA,EACzB,CAAC,CACL,CACJ,CAEJ,CAAA,CCjCA,eAAeI,CAAAA,EAAO,CAClB,IAAMC,CAAAA,CAAS,MAAMC,OAAa,CAAE,GAAGP,EAAQ,MAAA,CAAAE,CAAO,CAAC,CAAA,CAEvD,OAAA,MAAMI,EAAO,KAAA,EAAM,CAEZA,CACX,CAEAD,CAAAA,EAAK","file":"index.js","sourcesContent":["// src/backend/config/index.ts\r\n//\r\n// Made with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\r\n\r\n    import { ServerConfig } from '@minejs/server';\r\n    import path from 'path';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ INIT ════════════════════════════════════════╗\r\n\r\n    const port          = process.env.PORT                      || 3000;\r\n    const hostname      = process.env.HOSTNAME                  || 'localhost';\r\n    const origin        = (process.env.CORS_ORIGINS             || `http://${hostname}:${port}`).split(',');\r\n    const logLevel      = (process.env.LOG_LEVEL                || 'info') as 'error' | 'warn' | 'info' | 'debug';\r\n    const staticPath    = process.env.STATIC_PATH               || '/';\r\n    const staticDir     = path.resolve(process.env.STATIC_DIR   || './src/public');\r\n    // const dbName        = process.env.DATABASE_URL              || '{{name}}.db';\r\n\r\n    export const config : ServerConfig = {\r\n        port            : port,\r\n        hostname        : hostname,\r\n        requestTimeout  : 30000,\r\n        maxRequestSize  : 10485760,\r\n        routes          : [],\r\n\r\n        static          : {\r\n            path        : staticPath,\r\n            directory   : staticDir\r\n        },\r\n\r\n        security        : {\r\n            rateLimit   : {\r\n                max             : 100,\r\n                windowMs        : 60000,\r\n                message         : 'Too many requests. Please try again later.',\r\n                keyGenerator    : (c) => {\r\n                    const apiKey = c.request?.headers?.get?.('x-api-key');\r\n                    return apiKey || c.ip || 'unknown';\r\n                },\r\n            },\r\n            cors        : {\r\n                origin          : origin,\r\n                credentials     : true,\r\n                methods         : ['GET', 'POST', 'PUT', 'DELETE', 'PATCH'],\r\n                allowedHeaders  : ['Content-Type', 'Authorization', 'X-Request-ID']\r\n            },\r\n            csrf: true\r\n        },\r\n\r\n        logging         : {\r\n            level       : logLevel,\r\n            pretty      : true\r\n        },\r\n\r\n        i18n           : {\r\n            defaultLanguage     : 'ar',\r\n            supportedLanguages  : ['ar', 'en'],\r\n            basePath            : './src/i18n'\r\n        },\r\n\r\n        // database        : {\r\n        //     connection  : dbName,\r\n        //     schema      : { }\r\n        // },\r\n\r\n        onShutdown: async () => { },\r\n    };\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝","// src/backend/config/routes/index.ts\r\n//\r\n// Made with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\r\n\r\n    import { RouteDefinition, type AppContext, t } from '@minejs/server';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ INIT ════════════════════════════════════════╗\r\n\r\n    export const routes : RouteDefinition[] = [\r\n\r\n        // NOTE:\r\n        // the `/` route is used for public zone (static files).\r\n        // to avoid it, change the default public route in config.ts file to something else like `/static`.\r\n        //\r\n        // {\r\n        //     method  : 'GET',\r\n        //     path    : '/',\r\n        //     handler: (c: AppContext) => {\r\n        //         return c.json({ message: 'Hello World!' });\r\n        //     }\r\n        // },\r\n\r\n        {\r\n            method  : 'GET',\r\n            path    : '/hello_world',\r\n\r\n            handler: (c: AppContext) => {\r\n                // Language is auto-detected from:\r\n                // 1. ?lang=ar query parameter\r\n                // 2. lang=ar cookie\r\n                // 3. Accept-Language header\r\n                // 4. Default language\r\n\r\n                const currentLang = c.lang;\r\n\r\n                return c.json({\r\n                    message    : t('hello'),\r\n                    language   : currentLang,\r\n                    supported  : c.i18n?.getSupportedLanguages()\r\n                });\r\n            }\r\n        },\r\n\r\n    ];\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝","// src/index.ts\r\n//\r\n// Made with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\r\n\r\n    import { server as createServer }   from '@minejs/server';\r\n    import { config }                   from './server/config';\r\n    import { routes }                   from './server/routes';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    async function main() {\r\n        const server = await createServer({ ...config, routes });\r\n\r\n        await server.start();\r\n\r\n        return server;\r\n    }\r\n\r\n    main();\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝"]}